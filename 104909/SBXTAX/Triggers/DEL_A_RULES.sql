CREATE OR REPLACE TRIGGER sbxtax."DEL_A_RULES"
BEFORE DELETE ON sbxtax.TB_RULES
REFERENCING OLD AS OLD NEW AS NEW
FOR EACH ROW
BEGIN
  INSERT INTO A_RULES (
RULE_ID_O,
RULE_ORDER_O,
AUTH_REPORT_GROUP_ID_O,
ACTIVE_O,
PRODUCT_CATEGORY_ID_O,
MERCHANT_ID_O,
AUTHORITY_ID_O,
CODE_O,
EXEMPT_REASON_CODE_O,
CALCULATION_METHOD_O,
INVOICE_DESCRIPTION_O,
EXEMPT_O,
START_DATE_O,
END_DATE_O,
DELETED_O,
CREATED_BY_O,
CREATION_DATE_O,
LAST_UPDATED_BY_O,
LAST_UPDATE_DATE_O,
--SYNCHRONIZATION_TIMESTAMP_O,
RATE_CODE_O,
BASIS_PERCENT_O,
RULE_COMMENT_O,
TAX_TYPE_O,
IS_LOCAL_O,
LOCAL_AUTHORITY_TYPE_ID_O,
INPUT_RECOVERY_AMOUNT_O,
INPUT_RECOVERY_PERCENT_O,
UNIT_OF_MEASURE_O,
NO_TAX_O,
REPORTING_CATEGORY_O,
TAX_TREATMENT_O,
IS_DEPENDENT_PRODUCT_O,
MATERIAL_SET_LIST_ID_O,
AUTHORITY_RATE_SET_ID_O,
CHANGE_TYPE,
--CHANGE_VERSION,
CHANGE_DATE
  ) VALUES (
:OLD.RULE_ID,
:OLD.RULE_ORDER,
:OLD.AUTH_REPORT_GROUP_ID,
:OLD.ACTIVE,
:OLD.PRODUCT_CATEGORY_ID,
:OLD.MERCHANT_ID,
:OLD.AUTHORITY_ID,
:OLD.CODE,
:OLD.EXEMPT_REASON_CODE,
:OLD.CALCULATION_METHOD,
:OLD.INVOICE_DESCRIPTION,
:OLD.EXEMPT,
:OLD.START_DATE,
:OLD.END_DATE,
:OLD.DELETED,
:OLD.CREATED_BY,
:OLD.CREATION_DATE,
:OLD.LAST_UPDATED_BY,
:OLD.LAST_UPDATE_DATE,
--:OLD.SYNCHRONIZATION_TIMESTAMP,
:OLD.RATE_CODE,
:OLD.BASIS_PERCENT,
:OLD.RULE_COMMENT,
:OLD.TAX_TYPE,
:OLD.IS_LOCAL,
:OLD.LOCAL_AUTHORITY_TYPE_ID,
:OLD.INPUT_RECOVERY_AMOUNT,
:OLD.INPUT_RECOVERY_PERCENT,
:OLD.UNIT_OF_MEASURE,
:OLD.NO_TAX,
:OLD.REPORTING_CATEGORY,
:OLD.TAX_TREATMENT,
:OLD.IS_DEPENDENT_PRODUCT,
:OLD.MATERIAL_SET_LIST_ID,
:OLD.AUTHORITY_RATE_SET_ID,
    'DELETED',
    --(SELECT CONTENT_VERSION FROM TB_MERCHANTS WHERE MERCHANT_ID = :OLD.MERCHANT_ID),
    SYSDATE);
END;
/